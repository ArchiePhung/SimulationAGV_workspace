<launch>
  <rosparam command="load" file="$(find launch_pkg)/config/param.yaml" />

  <!-- Config AGV in Rviz -->
  <node pkg="tf" type="static_transform_publisher" name="agv1_to_agv1Safety" args="0 0 0 0 0 0 agv1 agv1_safety 30" />

  <arg name="agv1" default="$(find agv_simulation)/urdf/agv1.urdf"/>

  <param name="agv1_description" command="$(find xacro)/xacro $(arg agv1)" />

  <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" >
    <remap from="robot_description" to="agv1_description" />
  </node>

  <!-- robot launch -->
  <!-- Nhận lộ trình và lỗi từ stiClient_fake -->
  <node name="stiClient_fake" pkg="sti_control" type="FstiClient_movetoCurvePath.py" /> 

  <!-- Điều hướng AGV  -->
  <!-- <node name="MakePathbyPoint" pkg="sti_module" type="MakePathbyPoint.py" output="screen"/> -->
  <node pkg="sti_module"  name="makePathByPoint" type="makePathByPoint_agvtow.py" output="screen" > 
        <!-- <param name="topic_subPose" type="str" value="robotPose_lidarLOC" /> -->
        <param name="topic_subPose" type="str" value="agv_pose" />
        <param name="topic_subReq" type="str" value="request_move" />
        <param name="topic_pubListP" type="str" value="list_pointRequestMove" />
        <param name="topic_pubPath" type="str" value="path_global" />
  </node>

  <!-- Goal control for AGV towing -->
  <!-- <node pkg="sti_module"  name="GoalControl" type="goalControlTowingV2.py"> 
    <rosparam command="load" file="$(find sti_module)/config/param_lagv.yaml" />
    <param name="topic_CmdVel" type="str" value="cmd_vel" /> -->
    <!-- <param name="topic_pose" type="str" value="robotPose_lidarLOC" /> -->
    <!-- <param name="topic_pose" type="str" value="agv_pose" />
    <param name="topic_subListP" type="str" value="list_pointRequestMove" />
    <param name="topic_pubRes" type="str" value="move_respond" />
  </node> -->

  <!-- Goal control of AGV forklift -->
  <!-- <node name="MovetoCurvePath" pkg="sti_module" type="test_movetoCurvePath.py" output="screen">
    <rosparam command="load" file="$(find sti_module)/config/param_lagv.yaml" />
  </node> -->
  
  <!-- Vị trí của AGV trên Rviz -->
  <node name="agv_sim" pkg="agv_simulation" type="agv_sim.py" respawn="false" >
    <rosparam command="load" file="$(find agv_simulation)/config/param_lagv.yaml" />
  </node>

  <!-- Hiển thị qua rviz -->
  <node name="rviz" pkg="rviz" type="rviz" args="-d $(find agv_simulation)/config/rvizconfig.rviz" />  

</launch> 
